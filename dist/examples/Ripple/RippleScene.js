"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const M=require("react/jsx-runtime"),u=require("react"),f=require("../../src/core/lib/createShaderConfig.js"),a=require("../../src/core/lib/vectorUtils.js"),O=require("../../src/react/components/base/BasePingPongShaderComponent.js"),s=require("./rippleShaders.js"),P=[.1,.3,.1],q=[.3,.2,.4],g=({damping:S=.99,mouseForce:L=.5,color1:_=P,color2:C=q,iterations:R=2,className:x="",style:E})=>{const c=u.useRef([.5,.5]),n=u.useRef(!1),y=f.createShaderConfig({vertexShader:s.rippleVertexShader,fragmentShader:s.rippleSimulationShader,uniformNames:{u_texture0:"sampler2D",u_mouse:"vec2",u_mouseForce:"float",u_damping:"float"}}),w=f.createShaderConfig({vertexShader:s.rippleVertexShader,fragmentShader:s.rippleRenderShader,uniformNames:{u_texture0:"sampler2D",u_color1:"vec3",u_color2:"vec3"}});return u.useEffect(()=>{const i=e=>{const t=e.target.getBoundingClientRect(),o=(e.clientX-t.left)/t.width,r=1-(e.clientY-t.top)/t.height;c.current=[o,r]},d=()=>{n.current=!0},l=()=>{n.current=!1},m=e=>{if(e.touches.length>0){e.preventDefault();const t=e.target.getBoundingClientRect(),o=(e.touches[0].clientX-t.left)/t.width,r=1-(e.touches[0].clientY-t.top)/t.height;c.current=[o,r],n.current=!0}},h=e=>{if(e.touches.length>0&&n.current){e.preventDefault();const t=e.target.getBoundingClientRect(),o=(e.touches[0].clientX-t.left)/t.width,r=1-(e.touches[0].clientY-t.top)/t.height;c.current=[o,r]}},v=()=>{n.current=!1};return document.addEventListener("mousemove",i),document.addEventListener("mousedown",d),document.addEventListener("mouseup",l),document.addEventListener("touchstart",m,{passive:!1}),document.addEventListener("touchmove",h,{passive:!1}),document.addEventListener("touchend",v),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mousedown",d),document.removeEventListener("mouseup",l),document.removeEventListener("touchstart",m),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",v)}},[]),M.jsx(O.BasePingPongShaderComponent,{programId:"ripple-simulation",shaderConfig:y,secondaryProgramId:"ripple-render",secondaryShaderConfig:w,iterations:R,className:x,style:E,framebufferOptions:{width:0,height:0,textureCount:2,textureOptions:{minFilter:WebGLRenderingContext.LINEAR,magFilter:WebGLRenderingContext.LINEAR}},uniforms:{u_mouse:{type:"vec2",value:a.vec2(c.current)},u_mouseForce:{type:"float",value:()=>n.current?L:0},u_damping:{type:"float",value:S}},secondaryUniforms:{u_color1:{type:"vec3",value:a.vec3(_)},u_color2:{type:"vec3",value:a.vec3(C)}}})};exports.Ripple=g;exports.default=g;
